!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);class i{addEventListener(t,e){this._handlers||(this._handlers={}),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(e)}removeEventListener(t,e){this._handlers&&this._handlers[t]&&(this._handlers[t]=this._handlers[t].filter(t=>t!==e))}dispatchEvent(t){t.eventName&&this._handlers&&this._handlers[t.eventName]&&this._handlers[t.eventName].forEach(e=>e(t))}}class s extends i{constructor(t){super(),this.iframe=t,this.counter=Date.now(),this.ready=new Promise(this.ready.bind(this)),this._listener=this.onMessage.bind(this),window.addEventListener("message",this._listener);try{this.sendData("getApi")}catch(t){}}ready(t,e){this.rejectTimer=setTimeout(e,15e3),this.resolveReady=(()=>{clearTimeout(this.rejectTimer),delete this.rejectTimer,this.ready=!0,delete this.resolveReady,t()})}destroy(){window.removeEventListener("message",this._listener)}handleEvent(t){this.dispatchEvent(t)}onMessage(t){if(t.source!=this.iframe.contentWindow)return;let e=JSON.parse(t.data);switch(e.type){case"ready":this.sendData("getApi");break;case"event":this.handleEvent(e.data);break;case"api":this.bootstrap(e.data);break;case"methodResponse":this.handlePromise(e.data)}}bootstrap(){this.resolveReady()}send(t,e,n){if(!0!==this.ready&&!n)throw Error("Not ready");return this.pending||(this.pending={}),new Promise((n,i)=>{let s=this.counter++;this.sendData("method",{methodName:t,methodId:s,args:e}),this.pending[s]=[n,i,setTimeout(5e3,i)]})}handlePromise(t){let e=this.pending[t.methodId];if(!e)throw Error("Something really bad happened internally, trying to reference a promise that no longer exists");e[0](t),clearTimeout(e[2]),delete this.pending[t.methodId]}post(t){this.iframe.contentWindow.postMessage(t,"https://www.mixcloud.com")}sendData(t,e){this.post(JSON.stringify({type:t,data:e}))}}class a extends i{constructor(t,e){super(),this.url=t;var n=this.iframe=document.createElement("iframe");n.style.display="none",n.src="https://www.mixcloud.com/widget/iframe/?hide_cover=1&light=1&feed="+escape(t),document.body.appendChild(n),this.ready(),this.duration=0,this.mixcloud=new s(n),this.mixcloud.ready.then(n=>{this.load(t,e).then(t=>{this.getVolume().then(n=>{this.loadAPIData().then(n=>{this.setData(t),this.readyResolve(),e&&this.play()})})})}),this.mixcloud.addEventListener("progress",t=>{t.playback=this,this.dispatchEvent(t)}),this.mixcloud.addEventListener("play",t=>{t.playback=this,this.dispatchEvent(t)}),this.mixcloud.addEventListener("pause",t=>{t.playback=this,this.dispatchEvent(t)}),this.mixcloud.addEventListener("ended",t=>{t.playback=this,this.dispatchEvent(t)}),this.mixcloud.addEventListener("error",t=>{t.playback=this,this.dispatchEvent(t)}),this.mixcloud.addEventListener("buffering",t=>{t.playback=this,this.dispatchEvent(t)})}setData(t){this.data=t}ready(){this.ready=new Promise((t,e)=>{this.readyResolve=t}).then(t=>{delete this.readyResolve})}destroy(){this.mixcloud.destoy(),document.body.removeChild(this.iframe)}load(t,e){return this.mixcloud.send("load",[t,e])}play(){return this.mixcloud.send("play")}pause(){return this.mixcloud.send("pause")}toggle(){return this.mixcloud.send("togglePlay")}seek(t){return this.mixcloud.send("seek",[t])}loadAPIData(){return new Promise((t,e)=>{fetch("https://api.mixcloud.com"+this.url).then(t=>t.json()).then(t=>this.setMetadata(t)).then(e=>t(e)).catch(e=>t(null))})}getVolume(){return this.mixcloud.send("getVolume").then(t=>t.value)}setVolume(t){return this.mixcloud.send("setVolume",[t])}setMetadata(t){return this.duration=t.audio_length,this.title=t.name,this.description=t.description,t}}const r=n(1);class o{constructor(t){this.container=t,this.playback=null,this.loadCSS(),t.innerHTML='\n\t\t\t<div class="insanity-player">\n\t\t\t\t<div class="container">\n\t\t\t\t\t\x3c!-- put some visual here --\x3e\n\t\t\t\t\t<img src="https://insanityradio.com/wp-content/uploads/sites/4/2018/02/IMG_9396-e1518194803312.jpg" />\n\t\t\t\t</div>\n\t\t\t\t<div class="controls">\n\t\t\t\t\t<div class="top">\n\t\t\t\t\t\t<input type=range min=0 max=100 step=0.1 class="player-slider position-slider" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bottom">\n\t\t\t\t\t\t<button class="player-button play-button"><i class="fa fa-play"></i></button>\n\t\t\t\t\t\t<div class="timestamp">\n\t\t\t\t\t\t\t<span class="now timestamp-label">00:00:00</span> /\n\t\t\t\t\t\t\t<span class="length-label">01:03:03</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="right volume">\n\t\t\t\t\t\t\t<button class="player-button"><i class="fa fa-volume-up"></i></button>\n\t\t\t\t\t\t\t<input type=range min=0 max=1 value=1 step=0.05 class="player-slider volume-slider" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>',this.containers={mediaContent:t.querySelector(".container"),buttons:{play:t.querySelector(".play-button")},sliders:{position:t.querySelector(".position-slider"),volume:t.querySelector(".volume-slider")},labels:{timestamp:t.querySelector(".timestamp-label"),length:t.querySelector(".length-label")}},this.playing=!1,this.buffering=!0,this.currentTime=0,this.duration=0,this.addListeners(),this.drawAll()}load(t,e){this.playback&&this.playback.destroy(),this.playback=new a(e),this.playback.ready.then(t=>{this.drawAll()}),this.playback.addEventListener("play",t=>this.handlePlay(t)),this.playback.addEventListener("pause",t=>this.handlePause(t)),this.playback.addEventListener("ended",t=>this.handleEnded(t)),this.playback.addEventListener("progress",t=>this.handleProgress(t)),this.playback.addEventListener("buffering",t=>this.handleBuffer(t)),this.playback.addEventListener("error",t=>this.handleError(t))}addListeners(){this.containers.buttons.play.addEventListener("click",()=>{this.playing?this.playback.toggle().then(t=>this.drawAll()):this.playback.play().then(t=>this.drawAll())}),this.containers.sliders.position.addEventListener("mousedown",()=>{this._isMouseDown=!0,this.wasPlaying=this.playing,this.playback.pause()}),this.containers.sliders.position.addEventListener("mouseup",()=>{this._isMouseDown=!1,this.wasPlaying&&this.playback.play(),this.containers.sliders.position.blur()}),this.containers.sliders.position.addEventListener("change",t=>{this.playback.seek(t.target.value)}),this.containers.sliders.volume.addEventListener("change",t=>{this.playback.setVolume(t.target.value)})}loadCSS(){if(!document.getElementById("style_____insanity_player")){var t=document.createElement("style");t.innerHTML=r,t.attributes.id="style_____insanity_player",document.body.appendChild(t)}}handlePlay(){this.playing=!0,this.buffering=!1,this.drawAll()}handlePause(){this.playing=!1,this.buffering=!1,this.drawAll()}handleEnded(){this.playing=!1,this.buffering=!1,this.currentTime=0,this.drawAll()}handleError(){this.playing=!1,this.drawAll()}handleBuffer(){this.playing=!1,this.buffering=!0,this.drawAll()}handleProgress(t){this.currentTime=t.args[0],this.duration!=t.args[1]?(this.duration=t.args[1],this.drawAll()):this.drawMost()}getDuration(){return this.duration||this.playback&&this.playback.duration||0}getOffset(){return this.currentTime||0}drawAll(){let t=this.getDuration();this.containers.sliders.position.max=t||0,this.containers.labels.length.textContent=this.tsToString(t,t>=3600),this.containers.buttons.play.querySelector("i").className="fa fa-"+(this.playing?"pause":"play"),this.playback&&this.playback.getVolume().then(t=>{this.containers.sliders.volume.value=t}),this.drawMost()}drawMost(){this._isMouseDown||(this.containers.sliders.position.value=this.getOffset()||0),this.containers.labels.timestamp.textContent=this.tsToString(this.getOffset(),this.getDuration()>=3600)}tsToString(t,e){return((e=e||!1)?[3600,60,1]:[60,1]).map((e,n)=>("00"+Math.floor(n?t/e%60:t/e)).substr(-2)).join(":")}}n.d(e,"Mixcloud",function(){return s}),n.d(e,"Playback",function(){return a}),n.d(e,"Player",function(){return o}),window.Mixcloud=s,window.Playback=a,window.InsanityPlayer=o},function(t,e){t.exports='input[type=range].player-slider {\n\t-webkit-appearance: none;\n\twidth: 100%;\n\tmargin: 1.95px 0;\n}\n\n.position-slider {\n\topacity: 0.8;\n\ttransition: opacity 0.1s;\n}\n\n.controls:hover .position-slider {\n\topacity: 1;\n}\n\ninput[type=range].player-slider:focus {\n\toutline: none;\n}\ninput[type=range].player-slider::-webkit-slider-runnable-track {\n\twidth: 100%;\n\theight: 6.1px;\n\tcursor: pointer;\n\tbackground: #fe4f16;\n}\ninput[type=range].player-slider::-webkit-slider-thumb {\n\tborder: 1px solid #000000;\n\theight: 10px;\n\twidth: 8px;\n\tborder-radius: 0px;\n\tbackground: #ffffff;\n\tcursor: pointer;\n\t-webkit-appearance: none;\n\tmargin-top: -1.95px;\n}\n\ninput[type=range].player-slider:hover::-webkit-slider-thumb {\n\theight: 12px;\n}\n\ninput[type=range].player-slider:focus::-webkit-slider-runnable-track {\n\tbackground: #fe622f;\n}\ninput[type=range].player-slider::-moz-range-track {\n\twidth: 100%;\n\theight: 6.1px;\n\tcursor: pointer;\n\tbackground: #fe4f16;\n}\ninput[type=range].player-slider::-moz-range-thumb {\n\tborder: 1px solid #000000;\n\theight: 10px;\n\twidth: 8px;\n\tborder-radius: 0px;\n\tbackground: #ffffff;\n\tcursor: pointer;\n\ttransition: height 0.1s ease-out;\n}\n\ninput[type=range].player-slider:hover::-moz-range-thumb {\n\theight: 14px;\n}\n\ninput[type=range].player-slider::-ms-track {\n\twidth: 100%;\n\theight: 6.1px;\n\tcursor: pointer;\n\tbackground: transparent;\n\tborder-color: transparent;\n\tcolor: transparent;\n}\ninput[type=range].player-slider::-ms-fill-lower {\n\tbackground: #f93e01;\n}\ninput[type=range].player-slider::-ms-fill-upper {\n\tbackground: #fe4f16;\n}\ninput[type=range].player-slider::-ms-thumb {\n\tborder: 1px solid #000000;\n\theight: 10px;\n\twidth: 8px;\n\tbackground: #ffffff;\n\tcursor: pointer;\n\theight: 6.1px;\n}\ninput[type=range].player-slider:focus::-ms-fill-lower {\n\tbackground: #fe4f16;\n}\ninput[type=range].player-slider:focus::-ms-fill-upper {\n\tbackground: #fe622f;\n}\n\n.insanity-player {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.insanity-player .container {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.insanity-player .container > * {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n.insanity-player .controls {\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\twidth: 100%;\n\toverflow: hidden;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tpadding: 5px 10px 10px;\n\tbackground: rgba(20, 20, 20, 0.6);\n}\n\n.insanity-player .controls .top {\n\topacity: 0.8;\n}\n\n.insanity-player .controls .bottom, .insanity-player .controls .right {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n}\n\n.insanity-player .controls .player-button {\n\tbackground: none;\n\tborder: none;\n\tcolor: #FFF;\n\tfont-size: 12pt;\n\tpadding: 5px 20px;\n\topacity: 0.6;\n\tcursor: pointer;\n\ttransition: opacity 0.05s;\n\toutline: none;\n\twidth: 54px;\n}\n\n.insanity-player .controls .right {\n\tmargin-left: auto;\n}\n\n.insanity-player .controls .player-button:hover {\n\topacity: 1;\n}\n\n.insanity-player .controls .timestamp {\n\tcolor: #999;\n\tfont-size: 9.5pt;\n\tfont-family: "Open Sans", "Helvetica Neue", Arial, Verdana, sans-serif;\n\topacity: 0.8;\n}\n\n.insanity-player .controls .timestamp .now {\n\tcolor: #FFF;\n}\n\n.insanity-player .controls .volume-slider {\n\twidth: 50px;\n\topacity: 0;\n\tpointer-events: none;\n\ttransition: opacity 0.2s ease-out;\n}\n\n.insanity-player .controls .volume {\n\toverflow: hidden;\n\twidth: 100px;\n\tposition: relative;\n\tleft: 45px;\n\ttransition: left 0.2s;\n}\n\n.insanity-player .controls .volume:hover {\n\tleft: 0;\n}\n\n.insanity-player .controls .volume:hover .volume-slider {\n\topacity: 1;\n\tpointer-events: inherit;\n}\n\n.insanity-player .controls .volume .player-button {\n\twidth: 55px;\n\ttext-align: center;\n\tpadding: 5px;\n}'}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50X2xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9taXhjbG91ZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGxheWJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsYXllci5jc3MiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkV2ZW50TGlzdGVuZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJldmVudCIsImhhbmRsZXIiLCJ0aGlzIiwiX2hhbmRsZXJzIiwicHVzaCIsImZpbHRlciIsImUiLCJldmVudE5hbWUiLCJmb3JFYWNoIiwibWl4Y2xvdWRfTWl4Y2xvdWQiLCJpZnJhbWUiLCJzdXBlciIsImNvdW50ZXIiLCJEYXRlIiwibm93IiwicmVhZHkiLCJQcm9taXNlIiwiYmluZCIsIl9saXN0ZW5lciIsIm9uTWVzc2FnZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZW5kRGF0YSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWplY3RUaW1lciIsInNldFRpbWVvdXQiLCJyZXNvbHZlUmVhZHkiLCJjbGVhclRpbWVvdXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsInNvdXJjZSIsImNvbnRlbnRXaW5kb3ciLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwidHlwZSIsImhhbmRsZUV2ZW50IiwiYm9vdHN0cmFwIiwiaGFuZGxlUHJvbWlzZSIsIm1ldGhvZE5hbWUiLCJhcmdzIiwib3ZlcnJpZGUiLCJFcnJvciIsInBlbmRpbmciLCJpZCIsIm1ldGhvZElkIiwicG9zdE1lc3NhZ2UiLCJwb3N0Iiwic3RyaW5naWZ5IiwicGxheWJhY2tfUGxheWJhY2siLCJ1cmwiLCJzdGFydFBsYXlpbmciLCJmYWtlSWZyYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJkaXNwbGF5Iiwic3JjIiwiZXNjYXBlIiwiYm9keSIsImFwcGVuZENoaWxkIiwiZHVyYXRpb24iLCJtaXhjbG91ZCIsInRoZW4iLCJhIiwibG9hZCIsImdldFZvbHVtZSIsInZvbCIsImxvYWRBUElEYXRhIiwiZiIsInNldERhdGEiLCJyZWFkeVJlc29sdmUiLCJwbGF5IiwicGxheWJhY2siLCJfIiwiZGVzdG95IiwicmVtb3ZlQ2hpbGQiLCJzZW5kIiwib2Zmc2V0IiwiZmV0Y2giLCJqc29uIiwic2V0TWV0YWRhdGEiLCJjYXRjaCIsInZvbHVtZSIsImF1ZGlvX2xlbmd0aCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJTVFlMRSIsInBsYXllcl9QbGF5ZXIiLCJjb250YWluZXIiLCJsb2FkQ1NTIiwiaW5uZXJIVE1MIiwiY29udGFpbmVycyIsIm1lZGlhQ29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJidXR0b25zIiwic2xpZGVycyIsInBvc2l0aW9uIiwibGFiZWxzIiwidGltZXN0YW1wIiwibGVuZ3RoIiwicGxheWluZyIsImJ1ZmZlcmluZyIsImN1cnJlbnRUaW1lIiwiYWRkTGlzdGVuZXJzIiwiZHJhd0FsbCIsImRlc3Ryb3kiLCJoYW5kbGVQbGF5IiwiaGFuZGxlUGF1c2UiLCJoYW5kbGVFbmRlZCIsImhhbmRsZVByb2dyZXNzIiwiaGFuZGxlQnVmZmVyIiwiaGFuZGxlRXJyb3IiLCJ0b2dnbGUiLCJfaXNNb3VzZURvd24iLCJ3YXNQbGF5aW5nIiwicGF1c2UiLCJibHVyIiwic2VlayIsInRhcmdldCIsInNldFZvbHVtZSIsImdldEVsZW1lbnRCeUlkIiwiYXR0cmlidXRlcyIsImRyYXdNb3N0IiwiZ2V0RHVyYXRpb24iLCJtYXgiLCJ0ZXh0Q29udGVudCIsInRzVG9TdHJpbmciLCJjbGFzc05hbWUiLCJnZXRPZmZzZXQiLCJzZWNvbmRzIiwiaG91ciIsIm1hcCIsIk1hdGgiLCJmbG9vciIsInN1YnN0ciIsImpvaW4iLCJNaXhjbG91ZCIsIlBsYXliYWNrIiwiSW5zYW5pdHlQbGF5ZXIiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFVLEVBQUFDLEdBQXNELE9BQUFWLE9BQUFXLFVBQUFDLGVBQUFu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QUFBLE1BRUE1RCxLQUFBMkYsV0FBQUcsUUFBQXZCLEtBQUFzQixjQUFBLEtBQUFrQyxVQUFBLFVBQUEvSCxLQUFBb0csUUFBQSxnQkFFQXBHLEtBQUF3RSxVQUFBeEUsS0FBQXdFLFNBQUFQLFlBQUFILEtBQUFJLElBQ0FsRSxLQUFBMkYsV0FBQUksUUFBQWIsT0FBQS9GLE1BQUErRSxJQUdBbEUsS0FBQTBILFdBR0E3SCxXQUVBRyxLQUFBaUgsZUFDQWpILEtBQUEyRixXQUFBSSxRQUFBQyxTQUFBN0csTUFBQWEsS0FBQWdJLGFBQUEsR0FFQWhJLEtBQUEyRixXQUFBTSxPQUFBQyxVQUFBMkIsWUFBQTdILEtBQUE4SCxXQUFBOUgsS0FBQWdJLFlBQUFoSSxLQUFBMkgsZUFBQSxNQUlBOUgsV0FBQW9JLEVBQUFDLEdBR0EsUUFEQUEsTUFBQSxJQUNBLG1CQUFBQyxJQUFBLENBQUFwRSxFQUFBNUYsS0FDQSxLQUFBaUssS0FBQUMsTUFBQWxLLEVBQUE4SixFQUFBbEUsRUFBQSxHQUFBa0UsRUFBQWxFLElBQ0F1RSxRQUFBLElBQUFDLEtBQUEseUhDaE5BckgsT0FBQXNILFNBQUFqSSxFQUNBVyxPQUFBdUgsU0FBQXpGLEVBQ0E5QixPQUFBd0gsZUFBQW5ELGlCQ05BckgsRUFBQUQsUUFBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50TGlzdGVuZXIge1xuXG5cdGFkZEV2ZW50TGlzdGVuZXIgKGV2ZW50LCBoYW5kbGVyKSB7XG5cblx0XHR0aGlzLl9oYW5kbGVycyB8fCAodGhpcy5faGFuZGxlcnMgPSB7fSk7XG5cdFx0dGhpcy5faGFuZGxlcnNbZXZlbnRdIHx8ICh0aGlzLl9oYW5kbGVyc1tldmVudF0gPSBbXSk7XG5cdFx0dGhpcy5faGFuZGxlcnNbZXZlbnRdLnB1c2goaGFuZGxlcik7XG5cblx0fVxuXG5cdHJlbW92ZUV2ZW50TGlzdGVuZXIgKGV2ZW50LCBoYW5kbGVyKSB7XG5cblx0XHRpZiAoIXRoaXMuX2hhbmRsZXJzIHx8ICF0aGlzLl9oYW5kbGVyc1tldmVudF0pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5faGFuZGxlcnNbZXZlbnRdID0gdGhpcy5faGFuZGxlcnNbZXZlbnRdLmZpbHRlcihlID0+IGUgIT09IGhhbmRsZXIpO1xuXG5cdH1cblxuXHRkaXNwYXRjaEV2ZW50IChldmVudCkge1xuXHRcdGV2ZW50LmV2ZW50TmFtZSAmJiB0aGlzLl9oYW5kbGVycyAmJiB0aGlzLl9oYW5kbGVyc1tldmVudC5ldmVudE5hbWVdICYmXG5cdFx0XHR0aGlzLl9oYW5kbGVyc1tldmVudC5ldmVudE5hbWVdLmZvckVhY2goKGUpID0+IGUoZXZlbnQpKTtcblx0fVxuXG59IiwiaW1wb3J0IEV2ZW50TGlzdGVuZXIgZnJvbSAnLi9ldmVudF9saXN0ZW5lcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1peGNsb3VkIGV4dGVuZHMgRXZlbnRMaXN0ZW5lciB7XG5cblx0LyoqXG5cdCAqIFRha2VzIGFuIGlmcmFtZSAoc2hvdWxkIGJlIGEgTWl4Q2xvdWQgd2lkZ2V0KSBhbmQgXG5cdCAqL1xuXHRjb25zdHJ1Y3RvciAoaWZyYW1lKSB7XG5cblx0XHRzdXBlcigpO1xuXG5cdFx0dGhpcy5pZnJhbWUgPSBpZnJhbWU7XG5cdFx0dGhpcy5jb3VudGVyID0gRGF0ZS5ub3coKTtcblx0XHR0aGlzLnJlYWR5ID0gbmV3IFByb21pc2UodGhpcy5yZWFkeS5iaW5kKHRoaXMpKTtcblxuXHRcdHRoaXMuX2xpc3RlbmVyID0gdGhpcy5vbk1lc3NhZ2UuYmluZCh0aGlzKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuX2xpc3RlbmVyKTtcblxuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnNlbmREYXRhKCdnZXRBcGknKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHQvLyBub3QgeWV0IHJlYWR5XG5cdFx0fVxuXG5cdH1cblxuXHRyZWFkeSAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHR0aGlzLnJlamVjdFRpbWVyID0gc2V0VGltZW91dChyZWplY3QsIDE1MDAwKTtcblxuXHRcdHRoaXMucmVzb2x2ZVJlYWR5ID0gKCkgPT4ge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMucmVqZWN0VGltZXIpO1xuXHRcdFx0ZGVsZXRlIHRoaXMucmVqZWN0VGltZXI7XG5cdFx0XHR0aGlzLnJlYWR5ID0gdHJ1ZTtcblx0XHRcdGRlbGV0ZSB0aGlzLnJlc29sdmVSZWFkeTtcblx0XHRcdHJlc29sdmUoKTtcblx0XHR9XG5cblx0fVxuXG5cdGRlc3Ryb3kgKCkge1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5fbGlzdGVuZXIpXG5cdH1cblxuXHRoYW5kbGVFdmVudCAoZXZlbnQpIHtcblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHR9XG5cblx0b25NZXNzYWdlIChldmVudCkge1xuXG5cdFx0aWYgKGV2ZW50LnNvdXJjZSAhPSB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bGV0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuXG5cdFx0c3dpdGNoIChkYXRhLnR5cGUpIHtcblx0XHRcdGNhc2UgJ3JlYWR5Jzpcblx0XHRcdFx0dGhpcy5zZW5kRGF0YSgnZ2V0QXBpJyk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnZXZlbnQnOiBcblx0XHRcdFx0dGhpcy5oYW5kbGVFdmVudChkYXRhLmRhdGEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2FwaSc6XG5cdFx0XHRcdHRoaXMuYm9vdHN0cmFwKGRhdGEuZGF0YSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnbWV0aG9kUmVzcG9uc2UnOlxuXHRcdFx0XHR0aGlzLmhhbmRsZVByb21pc2UoZGF0YS5kYXRhKTtcblx0XHR9XG5cblx0fVxuXG5cdGJvb3RzdHJhcCAoKSB7XG5cdFx0dGhpcy5yZXNvbHZlUmVhZHkoKTtcblx0fVxuXG5cdHNlbmQgKG1ldGhvZE5hbWUsIGFyZ3MsIG92ZXJyaWRlKSB7XG5cblx0XHRpZiAodGhpcy5yZWFkeSAhPT0gdHJ1ZSAmJiAhb3ZlcnJpZGUpIHtcblx0XHRcdHRocm93IEVycm9yKCdOb3QgcmVhZHknKTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMucGVuZGluZykge1xuXHRcdFx0dGhpcy5wZW5kaW5nID0ge307XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuXHRcdFx0bGV0IGlkID0gdGhpcy5jb3VudGVyKys7XG5cblx0XHRcdHRoaXMuc2VuZERhdGEoJ21ldGhvZCcsIHsgXG5cdFx0XHRcdG1ldGhvZE5hbWU6IG1ldGhvZE5hbWUsXG5cdFx0XHRcdG1ldGhvZElkOiBpZCxcblx0XHRcdFx0YXJnczogYXJnc1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMucGVuZGluZ1tpZF0gPSBbcmVzb2x2ZSwgcmVqZWN0LCBzZXRUaW1lb3V0KDUwMDAsIHJlamVjdCldO1xuXG5cdFx0fSlcblx0fVxuXG5cdGhhbmRsZVByb21pc2UgKGRhdGEpIHtcblxuXHRcdGxldCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nW2RhdGEubWV0aG9kSWRdO1xuXG5cdFx0aWYgKCFwZW5kaW5nKSB7XG5cdFx0XHR0aHJvdyBFcnJvcignU29tZXRoaW5nIHJlYWxseSBiYWQgaGFwcGVuZWQgaW50ZXJuYWxseSwgdHJ5aW5nIHRvIHJlZmVyZW5jZSBhIHByb21pc2UgdGhhdCBubyBsb25nZXIgZXhpc3RzJylcblx0XHR9XG5cblx0XHRwZW5kaW5nWzBdKGRhdGEpO1xuXG5cdFx0Y2xlYXJUaW1lb3V0KHBlbmRpbmdbMl0pO1xuXHRcdGRlbGV0ZSB0aGlzLnBlbmRpbmdbZGF0YS5tZXRob2RJZF07XG5cblx0fVxuXG5cblx0cG9zdCAoZGF0YSkge1xuXHRcdHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoZGF0YSwgJ2h0dHBzOi8vd3d3Lm1peGNsb3VkLmNvbScpO1xuXHR9XG5cblx0c2VuZERhdGEgKHR5cGUsIGRhdGEpIHtcblx0XHR0aGlzLnBvc3QoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiB0eXBlLCBkYXRhOiBkYXRhIH0pKTtcblx0fVxuXG59XG4iLCJpbXBvcnQgRXZlbnRMaXN0ZW5lciBmcm9tICcuL2V2ZW50X2xpc3RlbmVyJztcbmltcG9ydCBNaXhjbG91ZCBmcm9tICcuL21peGNsb3VkJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWJhY2sgZXh0ZW5kcyBFdmVudExpc3RlbmVyIHtcblxuXHRjb25zdHJ1Y3RvciAodXJsLCBzdGFydFBsYXlpbmcpIHtcblx0XHRcblx0XHRzdXBlcigpO1xuXG5cdFx0dGhpcy51cmwgPSB1cmw7XG5cblx0XHR2YXIgZmFrZUlmcmFtZSA9IHRoaXMuaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG5cdFx0ZmFrZUlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGZha2VJZnJhbWUuc3JjID0gJ2h0dHBzOi8vd3d3Lm1peGNsb3VkLmNvbS93aWRnZXQvaWZyYW1lLz9oaWRlX2NvdmVyPTEmbGlnaHQ9MSZmZWVkPScgKyBlc2NhcGUodXJsKTtcblxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmFrZUlmcmFtZSk7XG5cblx0XHR0aGlzLnJlYWR5KCk7XG5cblx0XHR0aGlzLmR1cmF0aW9uID0gMDtcblx0XHR0aGlzLm1peGNsb3VkID0gbmV3IE1peGNsb3VkKGZha2VJZnJhbWUpO1xuXG5cdFx0dGhpcy5taXhjbG91ZC5yZWFkeS50aGVuKChhKSA9PiB7XG5cdFx0XHR0aGlzLmxvYWQodXJsLCBzdGFydFBsYXlpbmcpLnRoZW4oKGUpID0+IHtcblx0XHRcdFx0dGhpcy5nZXRWb2x1bWUoKS50aGVuKCh2b2wpID0+IHtcblx0XHRcdFx0XHR0aGlzLmxvYWRBUElEYXRhKCkudGhlbigoZikgPT4ge1xuXG5cdFx0XHRcdFx0XHR0aGlzLnNldERhdGEoZSk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlYWR5UmVzb2x2ZSgpO1xuXG5cdFx0XHRcdFx0XHRzdGFydFBsYXlpbmcgJiYgdGhpcy5wbGF5KCk7XG5cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9KVxuXG5cdFx0dGhpcy5taXhjbG91ZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIChlKSA9PiB7IGUucGxheWJhY2sgPSB0aGlzOyB0aGlzLmRpc3BhdGNoRXZlbnQoZSkgfSk7XG5cdFx0dGhpcy5taXhjbG91ZC5hZGRFdmVudExpc3RlbmVyKCdwbGF5JywgKGUpID0+IHsgZS5wbGF5YmFjayA9IHRoaXM7IHRoaXMuZGlzcGF0Y2hFdmVudChlKSB9KTtcblx0XHR0aGlzLm1peGNsb3VkLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgKGUpID0+IHsgZS5wbGF5YmFjayA9IHRoaXM7IHRoaXMuZGlzcGF0Y2hFdmVudChlKSB9KTtcblx0XHR0aGlzLm1peGNsb3VkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKGUpID0+IHsgZS5wbGF5YmFjayA9IHRoaXM7IHRoaXMuZGlzcGF0Y2hFdmVudChlKSB9KTtcblx0XHR0aGlzLm1peGNsb3VkLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGUpID0+IHsgZS5wbGF5YmFjayA9IHRoaXM7IHRoaXMuZGlzcGF0Y2hFdmVudChlKSB9KTtcblx0XHR0aGlzLm1peGNsb3VkLmFkZEV2ZW50TGlzdGVuZXIoJ2J1ZmZlcmluZycsIChlKSA9PiB7IGUucGxheWJhY2sgPSB0aGlzOyB0aGlzLmRpc3BhdGNoRXZlbnQoZSkgfSk7XG5cblx0fVxuXG5cdHNldERhdGEgKGUpIHtcblx0XHR0aGlzLmRhdGEgPSBlO1xuXHR9XG5cblx0cmVhZHkgKCkge1xuXHRcdHRoaXMucmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLnJlYWR5UmVzb2x2ZSA9IHJlc29sdmU7XG5cdFx0fSkudGhlbihfID0+IHtcblx0XHRcdGRlbGV0ZSB0aGlzLnJlYWR5UmVzb2x2ZTtcblx0XHR9KVxuXHR9XG5cblx0ZGVzdHJveSAoKSB7XG5cdFx0dGhpcy5taXhjbG91ZC5kZXN0b3koKTtcblx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKTtcblx0fVxuXG5cdGxvYWQgKHVybCwgc3RhcnRQbGF5aW5nKSB7XG5cdFx0cmV0dXJuIHRoaXMubWl4Y2xvdWQuc2VuZCgnbG9hZCcsIFt1cmwsIHN0YXJ0UGxheWluZ10pO1xuXHR9XG5cdFxuXHRwbGF5ICgpIHtcblx0XHRyZXR1cm4gdGhpcy5taXhjbG91ZC5zZW5kKCdwbGF5Jyk7XG5cdH1cblxuXHRwYXVzZSAoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWl4Y2xvdWQuc2VuZCgncGF1c2UnKTtcblx0fVxuXG5cdHRvZ2dsZSAoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWl4Y2xvdWQuc2VuZCgndG9nZ2xlUGxheScpO1xuXHR9XG5cblx0c2VlayAob2Zmc2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMubWl4Y2xvdWQuc2VuZCgnc2VlaycsIFtvZmZzZXRdKTtcblx0fVxuXG5cdGxvYWRBUElEYXRhICgpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0ZmV0Y2goJ2h0dHBzOi8vYXBpLm1peGNsb3VkLmNvbScgKyB0aGlzLnVybClcblx0XHRcdC50aGVuKChhKSA9PiBhLmpzb24oKSlcblx0XHRcdC50aGVuKChhKSA9PiB0aGlzLnNldE1ldGFkYXRhKGEpKVxuXHRcdFx0LnRoZW4oKGEpID0+IHJlc29sdmUoYSkpXG5cdFx0XHQuY2F0Y2goKGEpID0+IHJlc29sdmUobnVsbCkpXG5cdFx0fSlcblx0fVxuXG5cdGdldFZvbHVtZSAoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWl4Y2xvdWQuc2VuZCgnZ2V0Vm9sdW1lJylcblx0XHQudGhlbigoYSkgPT4gYS52YWx1ZSk7XG5cdH1cblxuXHRzZXRWb2x1bWUgKHZvbHVtZSkge1xuXHRcdHJldHVybiB0aGlzLm1peGNsb3VkLnNlbmQoJ3NldFZvbHVtZScsIFt2b2x1bWVdKTtcblx0fVxuXG5cdHNldE1ldGFkYXRhIChkYXRhKSB7XG5cblx0XHR0aGlzLmR1cmF0aW9uID0gZGF0YS5hdWRpb19sZW5ndGg7XG5cdFx0dGhpcy50aXRsZSA9IGRhdGEubmFtZTtcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcblxuXHRcdHJldHVybiBkYXRhO1xuXG5cdH1cblxufVxuXG4iLCJpbXBvcnQgRXZlbnRMaXN0ZW5lciBmcm9tICcuL2V2ZW50X2xpc3RlbmVyJztcbmltcG9ydCBQbGF5YmFjayBmcm9tICcuL3BsYXliYWNrJztcblxuY29uc3QgU1RZTEUgPSByZXF1aXJlKCcuL3BsYXllci5jc3MnKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIHtcblxuXG5cdGNvbnN0cnVjdG9yIChjb250YWluZXIpIHtcblxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXHRcdHRoaXMucGxheWJhY2sgPSBudWxsO1xuXHRcdHRoaXMubG9hZENTUygpO1xuXG5cdFx0Y29udGFpbmVyLmlubmVySFRNTCA9IGBcblx0XHRcdDxkaXYgY2xhc3M9XCJpbnNhbml0eS1wbGF5ZXJcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuXHRcdFx0XHRcdDwhLS0gcHV0IHNvbWUgdmlzdWFsIGhlcmUgLS0+XG5cdFx0XHRcdFx0PGltZyBzcmM9XCJodHRwczovL2luc2FuaXR5cmFkaW8uY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy9zaXRlcy80LzIwMTgvMDIvSU1HXzkzOTYtZTE1MTgxOTQ4MDMzMTIuanBnXCIgLz5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250cm9sc1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0b3BcIj5cblx0XHRcdFx0XHRcdDxpbnB1dCB0eXBlPXJhbmdlIG1pbj0wIG1heD0xMDAgc3RlcD0wLjEgY2xhc3M9XCJwbGF5ZXItc2xpZGVyIHBvc2l0aW9uLXNsaWRlclwiIC8+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImJvdHRvbVwiPlxuXHRcdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cInBsYXllci1idXR0b24gcGxheS1idXR0b25cIj48aSBjbGFzcz1cImZhIGZhLXBsYXlcIj48L2k+PC9idXR0b24+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGltZXN0YW1wXCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwibm93IHRpbWVzdGFtcC1sYWJlbFwiPjAwOjAwOjAwPC9zcGFuPiAvXG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwibGVuZ3RoLWxhYmVsXCI+MDE6MDM6MDM8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJyaWdodCB2b2x1bWVcIj5cblx0XHRcdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cInBsYXllci1idXR0b25cIj48aSBjbGFzcz1cImZhIGZhLXZvbHVtZS11cFwiPjwvaT48L2J1dHRvbj5cblx0XHRcdFx0XHRcdFx0PGlucHV0IHR5cGU9cmFuZ2UgbWluPTAgbWF4PTEgdmFsdWU9MSBzdGVwPTAuMDUgY2xhc3M9XCJwbGF5ZXItc2xpZGVyIHZvbHVtZS1zbGlkZXJcIiAvPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+YDtcblxuXHRcdHRoaXMuY29udGFpbmVycyA9ICB7XG5cdFx0XHRtZWRpYUNvbnRlbnQ6IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyksXG5cdFx0XHRidXR0b25zOiB7XG5cdFx0XHRcdHBsYXk6IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucGxheS1idXR0b24nKSxcblx0XHRcdH0sXG5cdFx0XHRzbGlkZXJzOiB7XG5cdFx0XHRcdHBvc2l0aW9uOiBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnBvc2l0aW9uLXNsaWRlcicpLFxuXHRcdFx0XHR2b2x1bWU6IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudm9sdW1lLXNsaWRlcicpXG5cdFx0XHR9LFxuXHRcdFx0bGFiZWxzOiB7XG5cdFx0XHRcdHRpbWVzdGFtcDogY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aW1lc3RhbXAtbGFiZWwnKSxcblx0XHRcdFx0bGVuZ3RoOiBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmxlbmd0aC1sYWJlbCcpLFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMucGxheWluZyA9IGZhbHNlO1xuXHRcdHRoaXMuYnVmZmVyaW5nID0gdHJ1ZTtcblx0XHR0aGlzLmN1cnJlbnRUaW1lID0gMDtcblx0XHR0aGlzLmR1cmF0aW9uID0gMDtcblxuXHRcdHRoaXMuYWRkTGlzdGVuZXJzKCk7XG5cdFx0dGhpcy5kcmF3QWxsKCk7XG5cblx0fVxuXG5cdGxvYWQgKHR5cGUsIHVybCkge1xuXG5cdFx0dGhpcy5wbGF5YmFjayAmJiB0aGlzLnBsYXliYWNrLmRlc3Ryb3koKTtcblx0XHR0aGlzLnBsYXliYWNrID0gbmV3IFBsYXliYWNrKHVybCk7XG5cblx0XHR0aGlzLnBsYXliYWNrLnJlYWR5LnRoZW4oKGEpID0+IHtcblx0XHRcdHRoaXMuZHJhd0FsbCgpO1xuXHRcdH0pXG5cblx0XHR0aGlzLnBsYXliYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoZSkgPT4gdGhpcy5oYW5kbGVQbGF5KGUpKVxuXHRcdHRoaXMucGxheWJhY2suYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoZSkgPT4gdGhpcy5oYW5kbGVQYXVzZShlKSlcblx0XHR0aGlzLnBsYXliYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKGUpID0+IHRoaXMuaGFuZGxlRW5kZWQoZSkpXG5cdFx0dGhpcy5wbGF5YmFjay5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIChlKSA9PiB0aGlzLmhhbmRsZVByb2dyZXNzKGUpKVxuXHRcdHRoaXMucGxheWJhY2suYWRkRXZlbnRMaXN0ZW5lcignYnVmZmVyaW5nJywgKGUpID0+IHRoaXMuaGFuZGxlQnVmZmVyKGUpKVxuXHRcdHRoaXMucGxheWJhY2suYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZSkgPT4gdGhpcy5oYW5kbGVFcnJvcihlKSlcblxuXHR9XG5cblx0YWRkTGlzdGVuZXJzICgpIHtcblxuXHRcdHRoaXMuY29udGFpbmVycy5idXR0b25zLnBsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5wbGF5aW5nKSB7XG5cdFx0XHRcdHRoaXMucGxheWJhY2sudG9nZ2xlKCkudGhlbigoYSkgPT4gdGhpcy5kcmF3QWxsKCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5wbGF5YmFjay5wbGF5KCkudGhlbigoYSkgPT4gdGhpcy5kcmF3QWxsKCkpO1xuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHQvLyBcblx0XHR0aGlzLmNvbnRhaW5lcnMuc2xpZGVycy5wb3NpdGlvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XG5cdFx0XHQvLyBTdG9yaW5nIHRoZSBsYXN0IHN0YXRlIGFsbG93cyB1cyB0byBzaW11YWxhdGUgc2Vla2luZyBpbiBhdWRpb1xuXHRcdFx0dGhpcy5faXNNb3VzZURvd24gPSB0cnVlO1xuXHRcdFx0dGhpcy53YXNQbGF5aW5nID0gdGhpcy5wbGF5aW5nO1xuXHRcdFx0dGhpcy5wbGF5YmFjay5wYXVzZSgpO1xuXHRcdH0pXG5cblx0XHR0aGlzLmNvbnRhaW5lcnMuc2xpZGVycy5wb3NpdGlvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5faXNNb3VzZURvd24gPSBmYWxzZTtcblx0XHRcdHRoaXMud2FzUGxheWluZyAmJiB0aGlzLnBsYXliYWNrLnBsYXkoKTtcblx0XHRcdHRoaXMuY29udGFpbmVycy5zbGlkZXJzLnBvc2l0aW9uLmJsdXIoKTtcblx0XHR9KVxuXG5cdFx0dGhpcy5jb250YWluZXJzLnNsaWRlcnMucG9zaXRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcblx0XHRcdHRoaXMucGxheWJhY2suc2VlayhlLnRhcmdldC52YWx1ZSlcblx0XHR9KVxuXG5cdFx0dGhpcy5jb250YWluZXJzLnNsaWRlcnMudm9sdW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG5cdFx0XHR0aGlzLnBsYXliYWNrLnNldFZvbHVtZShlLnRhcmdldC52YWx1ZSk7XG5cdFx0fSlcblxuXHR9XG5cblx0Lypcblx0cHJpdmF0ZSAqL1xuXHRsb2FkQ1NTICgpIHtcblxuXHRcdGNvbnN0IGlkZW50aWZpZXIgPSAnc3R5bGVfX19fX2luc2FuaXR5X3BsYXllcic7XG5cblx0XHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRlbnRpZmllcikpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXHRcdHN0eWxlLmlubmVySFRNTCA9IFNUWUxFO1xuXHRcdHN0eWxlLmF0dHJpYnV0ZXMuaWQgPSBpZGVudGlmaWVyO1xuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG5cdH1cblxuXHRoYW5kbGVQbGF5ICgpIHtcblx0XHR0aGlzLnBsYXlpbmcgPSB0cnVlO1xuXHRcdHRoaXMuYnVmZmVyaW5nID0gZmFsc2U7XG5cdFx0dGhpcy5kcmF3QWxsKCk7XG5cdH1cblxuXHRoYW5kbGVQYXVzZSAoKSB7XG5cdFx0dGhpcy5wbGF5aW5nID0gZmFsc2U7XG5cdFx0dGhpcy5idWZmZXJpbmcgPSBmYWxzZTtcblx0XHR0aGlzLmRyYXdBbGwoKTtcblx0fVxuXG5cdGhhbmRsZUVuZGVkICgpIHtcblx0XHR0aGlzLnBsYXlpbmcgPSBmYWxzZTtcblx0XHR0aGlzLmJ1ZmZlcmluZyA9IGZhbHNlO1xuXHRcdHRoaXMuY3VycmVudFRpbWUgPSAwO1xuXHRcdHRoaXMuZHJhd0FsbCgpO1xuXHR9XG5cblx0aGFuZGxlRXJyb3IgKCkge1xuXHRcdHRoaXMucGxheWluZyA9IGZhbHNlO1xuXHRcdHRoaXMuZHJhd0FsbCgpO1xuXHR9XG5cblx0aGFuZGxlQnVmZmVyICgpIHtcblx0XHR0aGlzLnBsYXlpbmcgPSBmYWxzZTtcblx0XHR0aGlzLmJ1ZmZlcmluZyA9IHRydWU7XG5cdFx0dGhpcy5kcmF3QWxsKCk7XG5cdH1cblxuXHRoYW5kbGVQcm9ncmVzcyAoZSkge1xuXG5cdFx0dGhpcy5jdXJyZW50VGltZSA9IGUuYXJnc1swXTtcblxuXHRcdGlmICh0aGlzLmR1cmF0aW9uICE9IGUuYXJnc1sxXSkge1xuXHRcdFx0dGhpcy5kdXJhdGlvbiA9IGUuYXJnc1sxXTtcblx0XHRcdHRoaXMuZHJhd0FsbCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmRyYXdNb3N0KCk7XG5cdFx0fVxuXG5cdH1cblxuXHRnZXREdXJhdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZHVyYXRpb24gfHwgKHRoaXMucGxheWJhY2sgJiYgdGhpcy5wbGF5YmFjay5kdXJhdGlvbikgfHwgMDtcblx0fVxuXG5cdGdldE9mZnNldCAoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFRpbWUgfHwgMDtcblx0fVxuXG5cdGRyYXdBbGwgKCkge1xuXG5cdFx0bGV0IGR1cmF0aW9uID0gdGhpcy5nZXREdXJhdGlvbigpXG5cdFx0dGhpcy5jb250YWluZXJzLnNsaWRlcnMucG9zaXRpb24ubWF4ID0gZHVyYXRpb24gfHwgMDtcblx0XHR0aGlzLmNvbnRhaW5lcnMubGFiZWxzLmxlbmd0aC50ZXh0Q29udGVudCA9IHRoaXMudHNUb1N0cmluZyhkdXJhdGlvbiwgZHVyYXRpb24gPj0gMzYwMCk7XG5cblx0XHR0aGlzLmNvbnRhaW5lcnMuYnV0dG9ucy5wbGF5LnF1ZXJ5U2VsZWN0b3IoJ2knKS5jbGFzc05hbWUgPSAnZmEgZmEtJyArICh0aGlzLnBsYXlpbmcgPyAncGF1c2UnIDogJ3BsYXknKTtcblxuXHRcdHRoaXMucGxheWJhY2sgJiYgdGhpcy5wbGF5YmFjay5nZXRWb2x1bWUoKS50aGVuKCh2b2wpID0+IHtcblx0XHRcdHRoaXMuY29udGFpbmVycy5zbGlkZXJzLnZvbHVtZS52YWx1ZSA9IHZvbDtcblx0XHR9KVxuXG5cdFx0dGhpcy5kcmF3TW9zdCgpO1xuXHR9XG5cblx0ZHJhd01vc3QgKCkge1xuXG5cdFx0aWYgKCF0aGlzLl9pc01vdXNlRG93bikge1xuXHRcdFx0dGhpcy5jb250YWluZXJzLnNsaWRlcnMucG9zaXRpb24udmFsdWUgPSB0aGlzLmdldE9mZnNldCgpIHx8IDA7XG5cdFx0fVxuXHRcdHRoaXMuY29udGFpbmVycy5sYWJlbHMudGltZXN0YW1wLnRleHRDb250ZW50ID0gdGhpcy50c1RvU3RyaW5nKHRoaXMuZ2V0T2Zmc2V0KCksIHRoaXMuZ2V0RHVyYXRpb24oKSA+PSAzNjAwKTtcblxuXHR9XG5cblx0dHNUb1N0cmluZyAoc2Vjb25kcywgaG91cikge1xuXG5cdFx0aG91ciA9IGhvdXIgfHwgZmFsc2U7XG5cdFx0cmV0dXJuIChob3VyID8gWzM2MDAsIDYwLCAxXSA6IFs2MCwgMV0pLm1hcCgoYSwgaSkgPT4gXG5cdFx0XHQoJzAwJyArIE1hdGguZmxvb3IoKGkgPyAoc2Vjb25kcyAvIGEgJSA2MCkgOiAoc2Vjb25kcy9hKSkpXG5cdFx0KS5zdWJzdHIoLTIpKS5qb2luKCc6Jyk7XG5cblx0fVxuXG59XG5cbiIsImltcG9ydCBNaXhjbG91ZCBmcm9tICcuL21peGNsb3VkJztcbmltcG9ydCBQbGF5YmFjayBmcm9tICcuL3BsYXliYWNrJztcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xuXG53aW5kb3cuTWl4Y2xvdWQgPSBNaXhjbG91ZDtcbndpbmRvdy5QbGF5YmFjayA9IFBsYXliYWNrO1xud2luZG93Lkluc2FuaXR5UGxheWVyID0gUGxheWVyO1xuXG5leHBvcnQgeyBNaXhjbG91ZCwgUGxheWJhY2ssIFBsYXllciB9O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBcImlucHV0W3R5cGU9cmFuZ2VdLnBsYXllci1zbGlkZXIge1xcblxcdC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcXG5cXHR3aWR0aDogMTAwJTtcXG5cXHRtYXJnaW46IDEuOTVweCAwO1xcbn1cXG5cXG4ucG9zaXRpb24tc2xpZGVyIHtcXG5cXHRvcGFjaXR5OiAwLjg7XFxuXFx0dHJhbnNpdGlvbjogb3BhY2l0eSAwLjFzO1xcbn1cXG5cXG4uY29udHJvbHM6aG92ZXIgLnBvc2l0aW9uLXNsaWRlciB7XFxuXFx0b3BhY2l0eTogMTtcXG59XFxuXFxuaW5wdXRbdHlwZT1yYW5nZV0ucGxheWVyLXNsaWRlcjpmb2N1cyB7XFxuXFx0b3V0bGluZTogbm9uZTtcXG59XFxuaW5wdXRbdHlwZT1yYW5nZV0ucGxheWVyLXNsaWRlcjo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xcblxcdHdpZHRoOiAxMDAlO1xcblxcdGhlaWdodDogNi4xcHg7XFxuXFx0Y3Vyc29yOiBwb2ludGVyO1xcblxcdGJhY2tncm91bmQ6ICNmZTRmMTY7XFxufVxcbmlucHV0W3R5cGU9cmFuZ2VdLnBsYXllci1zbGlkZXI6Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcXG5cXHRib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwO1xcblxcdGhlaWdodDogMTBweDtcXG5cXHR3aWR0aDogOHB4O1xcblxcdGJvcmRlci1yYWRpdXM6IDBweDtcXG5cXHRiYWNrZ3JvdW5kOiAjZmZmZmZmO1xcblxcdGN1cnNvcjogcG9pbnRlcjtcXG5cXHQtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XFxuXFx0bWFyZ2luLXRvcDogLTEuOTVweDtcXG59XFxuXFxuaW5wdXRbdHlwZT1yYW5nZV0ucGxheWVyLXNsaWRlcjpob3Zlcjo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xcblxcdGhlaWdodDogMTJweDtcXG59XFxuXFxuaW5wdXRbdHlwZT1yYW5nZV0ucGxheWVyLXNsaWRlcjpmb2N1czo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xcblxcdGJhY2tncm91bmQ6ICNmZTYyMmY7XFxufVxcbmlucHV0W3R5cGU9cmFuZ2VdLnBsYXllci1zbGlkZXI6Oi1tb3otcmFuZ2UtdHJhY2sge1xcblxcdHdpZHRoOiAxMDAlO1xcblxcdGhlaWdodDogNi4xcHg7XFxuXFx0Y3Vyc29yOiBwb2ludGVyO1xcblxcdGJhY2tncm91bmQ6ICNmZTRmMTY7XFxufVxcbmlucHV0W3R5cGU9cmFuZ2VdLnBsYXllci1zbGlkZXI6Oi1tb3otcmFuZ2UtdGh1bWIge1xcblxcdGJvcmRlcjogMXB4IHNvbGlkICMwMDAwMDA7XFxuXFx0aGVpZ2h0OiAxMHB4O1xcblxcdHdpZHRoOiA4cHg7XFxuXFx0Ym9yZGVyLXJhZGl1czogMHB4O1xcblxcdGJhY2tncm91bmQ6ICNmZmZmZmY7XFxuXFx0Y3Vyc29yOiBwb2ludGVyO1xcblxcdHRyYW5zaXRpb246IGhlaWdodCAwLjFzIGVhc2Utb3V0O1xcbn1cXG5cXG5pbnB1dFt0eXBlPXJhbmdlXS5wbGF5ZXItc2xpZGVyOmhvdmVyOjotbW96LXJhbmdlLXRodW1iIHtcXG5cXHRoZWlnaHQ6IDE0cHg7XFxufVxcblxcbmlucHV0W3R5cGU9cmFuZ2VdLnBsYXllci1zbGlkZXI6Oi1tcy10cmFjayB7XFxuXFx0d2lkdGg6IDEwMCU7XFxuXFx0aGVpZ2h0OiA2LjFweDtcXG5cXHRjdXJzb3I6IHBvaW50ZXI7XFxuXFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxuXFx0Ym9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcXG5cXHRjb2xvcjogdHJhbnNwYXJlbnQ7XFxufVxcbmlucHV0W3R5cGU9cmFuZ2VdLnBsYXllci1zbGlkZXI6Oi1tcy1maWxsLWxvd2VyIHtcXG5cXHRiYWNrZ3JvdW5kOiAjZjkzZTAxO1xcbn1cXG5pbnB1dFt0eXBlPXJhbmdlXS5wbGF5ZXItc2xpZGVyOjotbXMtZmlsbC11cHBlciB7XFxuXFx0YmFja2dyb3VuZDogI2ZlNGYxNjtcXG59XFxuaW5wdXRbdHlwZT1yYW5nZV0ucGxheWVyLXNsaWRlcjo6LW1zLXRodW1iIHtcXG5cXHRib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwO1xcblxcdGhlaWdodDogMTBweDtcXG5cXHR3aWR0aDogOHB4O1xcblxcdGJhY2tncm91bmQ6ICNmZmZmZmY7XFxuXFx0Y3Vyc29yOiBwb2ludGVyO1xcblxcdGhlaWdodDogNi4xcHg7XFxufVxcbmlucHV0W3R5cGU9cmFuZ2VdLnBsYXllci1zbGlkZXI6Zm9jdXM6Oi1tcy1maWxsLWxvd2VyIHtcXG5cXHRiYWNrZ3JvdW5kOiAjZmU0ZjE2O1xcbn1cXG5pbnB1dFt0eXBlPXJhbmdlXS5wbGF5ZXItc2xpZGVyOmZvY3VzOjotbXMtZmlsbC11cHBlciB7XFxuXFx0YmFja2dyb3VuZDogI2ZlNjIyZjtcXG59XFxuXFxuLmluc2FuaXR5LXBsYXllciB7XFxuXFx0cG9zaXRpb246IHJlbGF0aXZlO1xcblxcdHdpZHRoOiAxMDAlO1xcblxcdGhlaWdodDogMTAwJTtcXG59XFxuXFxuLmluc2FuaXR5LXBsYXllciAuY29udGFpbmVyIHtcXG5cXHR3aWR0aDogMTAwJTtcXG5cXHRoZWlnaHQ6IDEwMCU7XFxufVxcblxcbi5pbnNhbml0eS1wbGF5ZXIgLmNvbnRhaW5lciA+ICoge1xcblxcdHdpZHRoOiAxMDAlO1xcblxcdGhlaWdodDogMTAwJTtcXG5cXHRvYmplY3QtZml0OiBjb3ZlcjtcXG59XFxuXFxuLmluc2FuaXR5LXBsYXllciAuY29udHJvbHMge1xcblxcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG5cXHRib3R0b206IDA7XFxuXFx0bGVmdDogMDtcXG5cXHRyaWdodDogMDtcXG5cXHR3aWR0aDogMTAwJTtcXG5cXHRvdmVyZmxvdzogaGlkZGVuO1xcblxcdGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuXFx0LW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xcblxcdHBhZGRpbmc6IDVweCAxMHB4IDEwcHg7XFxuXFx0YmFja2dyb3VuZDogcmdiYSgyMCwgMjAsIDIwLCAwLjYpO1xcbn1cXG5cXG4uaW5zYW5pdHktcGxheWVyIC5jb250cm9scyAudG9wIHtcXG5cXHRvcGFjaXR5OiAwLjg7XFxufVxcblxcbi5pbnNhbml0eS1wbGF5ZXIgLmNvbnRyb2xzIC5ib3R0b20sIC5pbnNhbml0eS1wbGF5ZXIgLmNvbnRyb2xzIC5yaWdodCB7XFxuXFx0ZGlzcGxheTogZmxleDtcXG5cXHRmbGV4LWRpcmVjdGlvbjogcm93O1xcblxcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxufVxcblxcbi5pbnNhbml0eS1wbGF5ZXIgLmNvbnRyb2xzIC5wbGF5ZXItYnV0dG9uIHtcXG5cXHRiYWNrZ3JvdW5kOiBub25lO1xcblxcdGJvcmRlcjogbm9uZTtcXG5cXHRjb2xvcjogI0ZGRjtcXG5cXHRmb250LXNpemU6IDEycHQ7XFxuXFx0cGFkZGluZzogNXB4IDIwcHg7XFxuXFx0b3BhY2l0eTogMC42O1xcblxcdGN1cnNvcjogcG9pbnRlcjtcXG5cXHR0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMDVzO1xcblxcdG91dGxpbmU6IG5vbmU7XFxuXFx0d2lkdGg6IDU0cHg7XFxufVxcblxcbi5pbnNhbml0eS1wbGF5ZXIgLmNvbnRyb2xzIC5yaWdodCB7XFxuXFx0bWFyZ2luLWxlZnQ6IGF1dG87XFxufVxcblxcbi5pbnNhbml0eS1wbGF5ZXIgLmNvbnRyb2xzIC5wbGF5ZXItYnV0dG9uOmhvdmVyIHtcXG5cXHRvcGFjaXR5OiAxO1xcbn1cXG5cXG4uaW5zYW5pdHktcGxheWVyIC5jb250cm9scyAudGltZXN0YW1wIHtcXG5cXHRjb2xvcjogIzk5OTtcXG5cXHRmb250LXNpemU6IDkuNXB0O1xcblxcdGZvbnQtZmFtaWx5OiBcXFwiT3BlbiBTYW5zXFxcIiwgXFxcIkhlbHZldGljYSBOZXVlXFxcIiwgQXJpYWwsIFZlcmRhbmEsIHNhbnMtc2VyaWY7XFxuXFx0b3BhY2l0eTogMC44O1xcbn1cXG5cXG4uaW5zYW5pdHktcGxheWVyIC5jb250cm9scyAudGltZXN0YW1wIC5ub3cge1xcblxcdGNvbG9yOiAjRkZGO1xcbn1cXG5cXG4uaW5zYW5pdHktcGxheWVyIC5jb250cm9scyAudm9sdW1lLXNsaWRlciB7XFxuXFx0d2lkdGg6IDUwcHg7XFxuXFx0b3BhY2l0eTogMDtcXG5cXHRwb2ludGVyLWV2ZW50czogbm9uZTtcXG5cXHR0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1vdXQ7XFxufVxcblxcbi5pbnNhbml0eS1wbGF5ZXIgLmNvbnRyb2xzIC52b2x1bWUge1xcblxcdG92ZXJmbG93OiBoaWRkZW47XFxuXFx0d2lkdGg6IDEwMHB4O1xcblxcdHBvc2l0aW9uOiByZWxhdGl2ZTtcXG5cXHRsZWZ0OiA0NXB4O1xcblxcdHRyYW5zaXRpb246IGxlZnQgMC4ycztcXG59XFxuXFxuLmluc2FuaXR5LXBsYXllciAuY29udHJvbHMgLnZvbHVtZTpob3ZlciB7XFxuXFx0bGVmdDogMDtcXG59XFxuXFxuLmluc2FuaXR5LXBsYXllciAuY29udHJvbHMgLnZvbHVtZTpob3ZlciAudm9sdW1lLXNsaWRlciB7XFxuXFx0b3BhY2l0eTogMTtcXG5cXHRwb2ludGVyLWV2ZW50czogaW5oZXJpdDtcXG59XFxuXFxuLmluc2FuaXR5LXBsYXllciAuY29udHJvbHMgLnZvbHVtZSAucGxheWVyLWJ1dHRvbiB7XFxuXFx0d2lkdGg6IDU1cHg7XFxuXFx0dGV4dC1hbGlnbjogY2VudGVyO1xcblxcdHBhZGRpbmc6IDVweDtcXG59XCIiXSwic291cmNlUm9vdCI6IiJ9